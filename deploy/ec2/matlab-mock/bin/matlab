#!/bin/bash
# Mock MATLAB binary for demo pipeline.
# Delegates to Python mock that fakes test harness and code generation.

MOCK_DIR="$(dirname "$(dirname "$(readlink -f "$0")")")/mock"

echo "--------------------------------------------------------------"
echo "  MATLAB R2024b (Mock â€” Demo Mode)"
echo "--------------------------------------------------------------"

# Parse -batch argument
BATCH_CODE=""
while [[ $# -gt 0 ]]; do
    case "$1" in
        -batch)
            BATCH_CODE="$2"
            shift 2
            ;;
        *)
            shift
            ;;
    esac
done

if [ -z "$BATCH_CODE" ]; then
    echo "Mock MATLAB: no -batch argument provided" >&2
    exit 1
fi

exec python3 "$MOCK_DIR/mock_matlab.py" "$BATCH_CODE"
